<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    <!-- Enable responsiveness on mobile devices-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

    <title>{% block title %}{{ config.title }}{% endblock title %}</title>

    <!-- CSS -->
    <link rel="stylesheet" href="{{ get_url(path="print.css", trailing_slash=false) }}" media="print">
    <link rel="stylesheet" href="{{ get_url(path="poole.css", trailing_slash=false) }}">
    <link rel="stylesheet" href="{{ get_url(path="hyde.css", trailing_slash=false) }}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

    {% if config.generate_rss %}
    <link rel="alternate" type="application/rss+xml" title="RSS" href="{{ get_url(path="rss.xml", trailing_slash=false) }}">
    {% endif %}

    {% block extra_head %}
    {% endblock extra_head %}

    {% import "analytics.html" as analytics %}
    {{ analytics::google() }}
  </head>

  <body class="{{ config.extra.hyde_theme }} {% if config.extra.hyde_reverse %}layout-reverse{% endif %}">
    {% block sidebar %}
    <div class="sidebar">
      <div class="container {% if config.extra.hyde_sticky %}sidebar-sticky{% endif %}">
        <div class="sidebar-about">
          {% block sidebar_about %}
          <a href="{{ config.base_url }}"><h1>{{ config.title }}</h1></a>
          {% if config.description %}
          <p class="lead">{{config.description}}</p>
          {% endif %}
          {% endblock sidebar_about %}
        </div>

        <ul class="sidebar-nav">
          {% block sidebar_nav %}
          {% for link in config.extra.hyde_links %}
          <li><a href="{{link.url}}">{{link.name}}</a></li>
          {% endfor %}
          {% endblock sidebar_nav %}
        </ul>
      </div>
    </div>
    {% endblock sidebar %}
    <div class="content container">
      {% block content %}
      {{ section.content | safe }}

      {% block posts %}
      {% set blog = get_section(path="blog/_index.md") %}
      {% for page in blog.pages %}
        {% set show_draft = page.draft == true and config.extra.production_mode == false %}
        {% set public = page.draft == false %}
        {% if show_draft or public %}

        {% if show_draft %}
        draft : {{ page.draft }}
        {#prod mode : {{ config.extra.production_mode }}
        visible : {{ page.draft == false or page.draft == true and config.extra.production_mode == false }}#}
        {% endif %}
      <div class="post">
        <h1 class="post-title">
          <a href="{{ page.permalink }}">{{ page.title }}</a>
        </h1>
        <span class="post-date">{{ page.date | date(format="%Y-%m-%d") }} - Reading time: {{ page.reading_time }} min</span>
      </div>
        {% endif %}
      {% endfor %}
      {% endblock posts %}
      {% endblock content %}
    </div>
  </body>

</html>
